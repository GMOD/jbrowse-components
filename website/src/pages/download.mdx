import config from '../../docusaurus.config.json'
import { Button, Card, CardContent, Typography, Link, Box } from '@mui/material'
import { Apple, DesktopWindows, ArrowDownward } from '@mui/icons-material'

export const GithubLink = () => {
  const curr = `https://github.com/GMOD/jbrowse-components/releases/tag/${config.customFields.currentVersion}`
  return (
    <div>
      <ul>
        <li>
          <a href={curr}>{curr}</a>
        </li>
      </ul>
    </div>
  )
}

export const StorybookLGVLink = () => {
  return (
    <a
      href={`https://jbrowse.org/storybook/lgv/${config.customFields.currentVersion}/?path=/story/getting-started--page`}
    >
      storybook docs
    </a>
  )
}

export const StorybookCGVLink = () => {
  return (
    <a
      href={`https://jbrowse.org/storybook/cgv/${config.customFields.currentVersion}/?path=/story/getting-started--page`}
    >
      storybook docs
    </a>
  )
}

export const DownloadCard = ({ os, icon, link }) => {
  const downloadLink = `https://github.com/GMOD/jbrowse-components/releases/download/${config.customFields.currentVersion}/jbrowse-desktop-${config.customFields.currentVersion}-${link}`
  return (
    <Card style={{ background: '#F0F0F0' }}>
      <CardContent
        style={{
          display: 'flex',
          flexFlow: 'column',
          alignItems: 'center',
        }}
      >
        <h3>{os}</h3>
        <Button
          variant="contained"
          color="primary"
          startIcon={icon}
          href={downloadLink}
          style={{
            backgroundColor: '#3f51b5',
            color: 'white',
          }}
        >
          download
        </Button>
      </CardContent>
    </Card>
  )
}

export const DownloadCardContainer = () => {
  const downloadLink = `https://github.com/GMOD/jbrowse-components/releases/tag/${config.customFields.currentVersion}`
  return (
    <div>
      <Box sx={{ display: { xs: 'flex', sm: 'flex', md: 'none' } }}>
        <Typography variant="body1">
          Checkout our downloads available for MacOS, Windows, and Linux{' '}
          <Link href={downloadLink}>here</Link>.
        </Typography>
      </Box>
      <Box
        sx={{ display: { xs: 'none', sm: 'none', md: 'flex' } }}
        style={{ flexDirection: 'column', gap: '15px' }}
      >
        <Typography variant="body1">
          Download JBrowse 2 desktop on the platform of your choice:
        </Typography>
        <div
          style={{
            display: 'flex',
            flexDirection: 'column',
            gap: '20px',
          }}
        >
          <div
            style={{
              display: 'flex',
              flexDirection: 'row',
              justifyContent: 'space-evenly',
            }}
          >
            <DownloadCard os="MacOS" icon={<Apple />} link="mac.dmg" />
            <DownloadCard
              os="Windows"
              icon={<DesktopWindows />}
              link="win.exe"
            />
            <DownloadCard
              os="Linux"
              icon={<ArrowDownward />}
              link="linux.AppImage"
            />
          </div>
          <Typography
            variant="caption"
            style={{
              alignSelf: 'center',
            }}
          >
            Check out our quick start guide{' '}
            <Link href="/jb2/docs/quickstart_desktop/">
              instructions after downloading
            </Link>
            . Can't find what you're looking for? Checkout <Link
              href={downloadLink}
            >
              other platforms
            </Link>.
          </Typography>
        </div>
      </Box>
    </div>
  )
}

# Download JBrowse 2

JBrowse 2 is a new browser for today's increasingly complex data. We
make several different products for use in different scenarios, choose
the one below that best fits your needs.

## JBrowse 2 desktop

A standalone app that runs on your own computer that can view data from many sources.

<DownloadCardContainer />

<br />

<p align="center">
  <img
    width="100%"
    alt="JBrowse desktop session"
    src={`${config.baseUrl}img/desktop-session.png`}
  />
</p>
<br />

## JBrowse 2 web

Run a full-featured genome browser with many types of built-in views on your own website.
To get started with JBrowse Web, we recommend using the jbrowse CLI tools.
You can also use the jbrowse CLI for things like adding tracks too.

## JBrowse CLI tools

Use the command line to install and configure JBrowse 2 for the web. Requires [Node.js](https://nodejs.org/).

```shell
# Install the command line tools from npm
npm install -g @jbrowse/cli

# Download the latest release of jbrowse from github releases
jbrowse create jbrowse_folder
```

After that, check out our [super-quick start
guide](/docs/superquickstart_web) or the slightly longer [quick-start
guide](/docs/quickstart_web).

## Static image generator

- [@jbrowse/img](https://www.npmjs.com/package/@jbrowse/img) - Generate images of JBrowse 2 statically on the command line

## Embedded components

- [@jbrowse/react-linear-genome-view](https://www.npmjs.com/package/@jbrowse/react-linear-genome-view) linear genome browser view React component on <tt>NPM</tt>. Also see our <StorybookLGVLink/>
- [@jbrowse/react-circular-genome-view](https://www.npmjs.com/package/@jbrowse/react-circular-genome-view) circular genome browser view React component on <tt>NPM</tt>. Also see our <StorybookCGVLink/>

## Jupyter Notebooks Extension

- [Documentation](https://gmod.github.io/jbrowse-jupyter/docs/html/index.html) [Source code (GitHub)](https://github.com/GMOD/jbrowse-jupyter)

## Dash - Python

- [GMOD/dash_jbrowse](https://github.com/GMOD/dash_jbrowse)

## R/Shiny widget

- [JBrowseR](https://gmod.github.io/JBrowseR/) R package on <tt>CRAN</tt>
