import config from '../../docusaurus.config.json'
import Button from '@mui/material/Button'
import Card from '@mui/material/Card'
import CardContent from '@mui/material/CardContent'
import Typography from '@mui/material/Typography'
import Link from '@mui/material/Link'
import Box from '@mui/material/Box'
import Apple from '@mui/icons-material/Apple'
import DesktopWindows from '@mui/icons-material/DesktopWindows'
import ArrowDownward from '@mui/icons-material/ArrowDownward'

export const GithubLink = () => {
  const curr = `https://github.com/GMOD/jbrowse-components/releases/tag/${config.customFields.currentVersion}`
  return (
    <div>
      <ul>
        <li>
          <a href={curr}>{curr}</a>
        </li>
      </ul>
    </div>
  )
}

export const StorybookLGVLink = () => {
  return (
    <a
      href={`https://jbrowse.org/storybook/lgv/${config.customFields.currentVersion}/?path=/story/getting-started--page`}
    >
      storybook docs
    </a>
  )
}

export const StorybookCGVLink = () => {
  return (
    <a
      href={`https://jbrowse.org/storybook/cgv/${config.customFields.currentVersion}/?path=/story/getting-started--page`}
    >
      storybook docs
    </a>
  )
}

export const DownloadCard = ({ os, icon, link }) => {
  const downloadLink = `https://github.com/GMOD/jbrowse-components/releases/download/${config.customFields.currentVersion}/jbrowse-desktop-${config.customFields.currentVersion}-${link}`
  return (
    <Card style={{ background: '#F0F0F0' }}>
      <CardContent
        style={{
          display: 'flex',
          flexFlow: 'column',
          alignItems: 'center',
        }}
      >
        <h3>{os}</h3>
        <Button
          variant="contained"
          color="primary"
          startIcon={icon}
          href={downloadLink}
          style={{
            backgroundColor: '#3f51b5',
            color: 'white',
          }}
        >
          download
        </Button>
      </CardContent>
    </Card>
  )
}

export const DownloadWeb = ({ link }) => {
  const downloadLink = `https://github.com/GMOD/jbrowse-components/releases/download/${config.customFields.currentVersion}/jbrowse-web-${config.customFields.currentVersion}.zip`
  return (
    <div style={{ display: 'flex', margin: 20 }}>
      <div style={{ flexGrow: 1 }}></div>
      <Card style={{ background: '#F0F0F0' }}>
        <CardContent>
          <h3>JBrowse Web</h3>
          <Button
            variant="contained"
            color="primary"
            href={downloadLink}
            style={{
              backgroundColor: '#3f51b5',
              color: 'white',
              margin: '10px',
            }}
          >
            download
          </Button>
        </CardContent>
      </Card>
      <div style={{ flexGrow: 1 }}></div>
    </div>
  )
}

export const DownloadCardContainer = () => {
  const downloadLink = `https://github.com/GMOD/jbrowse-components/releases/tag/${config.customFields.currentVersion}`
  return (
    <div style={{ margin: '10px' }}>
      <Box sx={{ display: { xs: 'flex', sm: 'flex', md: 'none' } }}>
        <Typography variant="body1">
          Checkout our downloads available for MacOS, Windows, and Linux{' '}
          <Link href={downloadLink}>here</Link>.
        </Typography>
      </Box>
      <Box
        sx={{ display: { xs: 'none', sm: 'none', md: 'flex' } }}
        style={{ flexDirection: 'column', gap: '15px' }}
      >
        <Typography variant="body1"></Typography>
        <div
          style={{
            display: 'flex',
            flexDirection: 'column',
            gap: '20px',
          }}
        >
          <div
            style={{
              display: 'flex',
              flexDirection: 'row',
              justifyContent: 'space-evenly',
            }}
          >
            <DownloadCard os="MacOS" icon={<Apple />} link="mac.dmg" />
            <DownloadCard
              os="Windows"
              icon={<DesktopWindows />}
              link="win.exe"
            />
            <DownloadCard
              os="Linux"
              icon={<ArrowDownward />}
              link="linux.AppImage"
            />
          </div>
          <Typography
            variant="caption"
            style={{
              alignSelf: 'center',
            }}
          >
            Check out our quick start guide{' '}
            <Link href="/jb2/docs/quickstart_desktop/">
              instructions after downloading
            </Link>
            . Can't find what you're looking for? Checkout{' '}
            <Link href={downloadLink}>other platforms</Link>.
          </Typography>
        </div>
      </Box>
    </div>
  )
}

# Download JBrowse 2

JBrowse 2 is a new browser for today's increasingly complex data. We make
several different products for use in different scenarios, choose the one below
that best fits your needs.

## JBrowse Desktop

A standalone app that runs on your own computer that can view data from many
sources. Download JBrowse Desktop on the platform of your choice:

<DownloadCardContainer />

## JBrowse Web

Run a full-featured genome browser with many types of built-in views on your own
website.

<DownloadWeb />

Consider installing the JBrowse CLI tools (below), which can be used to create
and manage JBrowse Web instances from the command line.

## JBrowse CLI tools

The JBrowse CLI helps administrators add genome assemblies, tracks, and more to
their config files.

To install:

```shell
npm install -g @jbrowse/cli
```

After installing the CLI tools, check out our
[quick-start guide](/docs/quickstart_web).

## Static image generator

- [@jbrowse/img](https://www.npmjs.com/package/@jbrowse/img) - Generate images
  of JBrowse 2 statically on the command line

## Embedded components

- [@jbrowse/react-linear-genome-view](https://www.npmjs.com/package/@jbrowse/react-linear-genome-view)
  linear genome browser view React component on <tt>NPM</tt>
  - See code examples here in the linear genome view <StorybookLGVLink />
- [@jbrowse/react-circular-genome-view](https://www.npmjs.com/package/@jbrowse/react-circular-genome-view)
  circular genome browser view React component on <tt>NPM</tt>
  - See code examples here in the circular genome view <StorybookCGVLink />

More info here [embedded docs](../docs/embedded_components) including examples
of including the app with various build systems (create-react-app, vite,
next.js, vanillajs, etc.)

## Jupyter Notebooks Extension

- [Documentation](https://gmod.github.io/jbrowse-jupyter/docs/html/index.html)
- [Source code](https://github.com/GMOD/jbrowse-jupyter)

## Dash - Python

- [GMOD/dash_jbrowse](https://github.com/GMOD/dash_jbrowse)

## R/Shiny widget

- [JBrowseR](https://gmod.github.io/JBrowseR/) R package on <tt>CRAN</tt>
